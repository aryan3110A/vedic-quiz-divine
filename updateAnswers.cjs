const fs = require("fs");
const path = "src/data/questions.ts";
const text = fs.readFileSync(path, "utf8");

const answerPairs = [
[1,3],[2,2],[3,1],[4,3],[5,1],[6,1],[7,2],[8,1],[9,2],[10,2],
[11,2],[12,1],[13,2],[14,1],[15,3],[16,3],[17,2],[18,3],[19,3],[20,3],
[21,2],[22,1],[23,2],[24,2],[25,2],[26,1],[27,2],[28,3],[29,1],[30,3],
[31,3],[32,1],[33,3],[34,3],[35,2],[36,1],[37,1],[38,1],[39,1],[40,1],
[41,2],[42,2],[43,3],[44,2],[45,1],[46,1],[47,3],[48,3],[49,2],[50,3],
[51,3],[52,3],[53,3],[54,2],[55,1],[56,3],[57,2],[58,3],[59,1],[60,3],
[61,3],[62,1],[63,1],[64,2],[65,1],[66,1],[67,1],[68,2],[69,1],[70,1],
[71,1],[72,1],[73,1],[74,1],[75,3],[76,3],[77,1],[78,1],[79,3],[80,1],
[81,3],[82,2],[83,1],[84,2],[85,3],[86,2],[87,3],[88,3],[89,2],[90,2],
[91,3],[92,3],[93,1],[94,2],[95,1],[96,1],[97,3],[98,2],[99,3],[100,3],
[101,3],[102,2],[103,3],[104,1],[105,3],[106,3],[107,3],[108,1],[109,2],[110,2],
[111,2],[112,2],[113,1],[114,1],[115,1],[116,2],[117,2],[118,1],[119,2],[120,2],
[121,3],[122,3],[123,1],[124,3],[125,2],[126,1],[127,2],[128,1],[129,3],[130,3],
[131,3],[132,3],[133,1],[134,2],[135,2],[136,3],[137,1],[138,3],[139,2],[140,2],
[141,3],[142,1],[143,2],[144,3],[145,2],[146,3],[147,2],[148,3],[149,1],[150,3],
[151,1],[152,2],[153,3],[154,2],[155,1],[156,3],[157,2],[158,3],[159,1],[160,1],
[161,2],[162,1],[163,2],[164,1],[165,3],[166,2],[167,1],[168,2],[169,1],[170,2],
[171,1],[172,1],[173,3],[174,3],[175,3],[176,2],[177,1],[178,1],[179,2],[180,1],
[181,1],[182,1]
];

const answers = Object.fromEntries(answerPairs.map(([id, val]) => [id, val - 1]));

let currentId = null;
const lines = text.split("\n");
for (let i = 0; i < lines.length; i++) {
  const idMatch = lines[i].match(/\bid:\s*(\d+)/);
  if (idMatch) {
    currentId = Number(idMatch[1]);
    continue;
  }
  if (currentId && lines[i].includes("correctAnswer")) {
    if (Object.prototype.hasOwnProperty.call(answers, currentId)) {
      lines[i] = lines[i].replace(/correctAnswer:\s*\d+/, "correctAnswer: " + answers[currentId]);
    }
    currentId = null;
  }
}

fs.writeFileSync(path, lines.join("\n"));

